<div class="container mt-4">
  <h3 class="mb-4 text-primary text-center">Assign Department Access to Manager Employee</h3>

  <!-- Manager Selection -->
  <div class="mb-3">
    <label class="form-label">Select Manager Employee</label>
    <select class="form-select" [(ngModel)]="selectedManagerId">
      <option value="">-- Select Employee --</option>
      <option *ngFor="let emp of employees" [value]="emp.id">{{emp.name}} ({{emp.email}})</option>
    </select>
  </div>

  <button class="btn btn-primary mb-3" (click)="viewAccess()" [disabled]="!selectedManagerId">
    View Access
  </button>

  <!-- Departments List -->
  <div *ngIf="departments.length > 0" class="card p-3 shadow">
    <h5 class="mb-3">Departments</h5>
    <div *ngFor="let dept of departments" class="form-check form-switch mb-2">
      <input
        class="form-check-input"
        type="checkbox"
        [(ngModel)]="dept.hasAccess"
        [id]="'dept_'+dept.id"
        (change)="toggleAccess(dept)"
      >
      <label class="form-check-label" [for]="'dept_'+dept.id">{{ dept.departmentnm }}</label>
    </div>

    <button class="btn btn-success mt-3" (click)="saveAccess()" [disabled]="!departments.length">
      Save Access
    </button>
  </div>
</div>
